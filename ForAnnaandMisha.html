<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Михаил & Аня: Timeless Love</title>
    <style>
        /* Основные стили и сброс */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'EB Garamond', 'Times New Roman', serif;
            background-color: #000;
            color: #e8e0c9;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,600;1,400&family=Cinzel:wght@400;600&display=swap');
        
        /* Основной контейнер */
        #container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            overflow: hidden;
            background: radial-gradient(ellipse at center, #000000 0%, #080010 100%);
            transition: all 3s cubic-bezier(0.42, 0, 0.58, 1);
        }
        
        /* Фазы анимации */
        .phase-initial #container { background: radial-gradient(ellipse at center, #000000 0%, #080010 100%); }
        .phase-middle #container { background: radial-gradient(ellipse at center, #0a0a2c 0%, #05051a 100%); }
        .phase-romantic #container { background: radial-gradient(ellipse at center, #1a0a34 0%, #0a051a 100%); }
        .phase-final #container { background: radial-gradient(ellipse at center, #240a2b 0%, #0a051a 100%); }
        
        /* Звезды на фоне */
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            opacity: 0;
            box-shadow: 0 0 5px 1px rgba(255, 255, 255, 0.8);
            animation: twinkle var(--twinkle-duration, 5s) ease-in-out infinite;
            animation-delay: var(--twinkle-delay, 0s);
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.1; transform: scale(0.8); }
            50% { opacity: 0.8; transform: scale(1.2); }
        }
        
        /* Антикварные часы */
        #clock-container {
            position: relative;
            width: 260px;
            height: 360px;
            opacity: 1;
            transition: all 2s cubic-bezier(0.6, -0.28, 0.735, 0.045);
            transform: scale(1);
            transform-origin: center center;
            z-index: 10;
            filter: drop-shadow(0 0 10px rgba(192, 156, 77, 0.4));
        }
        
        .clock-face {
            position: absolute;
            width: 220px;
            height: 220px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #1a1208;
            border: 12px solid #c09c4d;
            border-radius: 50%;
            z-index: 2;
            box-shadow: 0 0 20px rgba(192, 156, 77, 0.6), inset 0 0 30px rgba(0, 0, 0, 0.7);
        }
        
        .clock-face::before {
            content: '';
            position: absolute;
            width: 90%;
            height: 90%;
            top: 5%;
            left: 5%;
            border: 1px solid rgba(192, 156, 77, 0.3);
            border-radius: 50%;
        }
        
        .clock-numbers {
            position: absolute;
            width: 100%;
            height: 100%;
            font-family: 'Cinzel', serif;
            color: #c09c4d;
            font-size: 16px;
            font-weight: bold;
        }
        
        .clock-number {
            position: absolute;
            width: 20px;
            height: 20px;
            text-align: center;
            line-height: 20px;
        }
        
        .clock-hands {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 3;
        }
        
        .hand {
            position: absolute;
            left: 50%;
            bottom: 50%;
            transform-origin: 50% 100%;
            background: #c09c4d;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        
        .hour-hand { width: 6px; height: 60px; margin-left: -3px; border-radius: 4px; transform: rotate(90deg); }
        .minute-hand { width: 4px; height: 90px; margin-left: -2px; border-radius: 4px; transform: rotate(45deg); }
        .second-hand { width: 2px; height: 100px; margin-left: -1px; background: #d4af37; transform: rotate(180deg); }
        
        .clock-center {
            position: absolute;
            width: 12px;
            height: 12px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #d4af37;
            border-radius: 50%;
            z-index: 4;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.7);
        }
        
        .clock-ornament {
            position: absolute;
            width: 20px;
            height: 20px;
            background: none;
            border: 2px solid rgba(192, 156, 77, 0.5);
            border-radius: 50%;
            z-index: 5;
            opacity: 0.8;
            animation: floatOrnament 4s ease-in-out infinite;
        }
        
        .clock-ornament.top-left { top: 10px; left: 20px; }
        .clock-ornament.top-right { top: 10px; right: 20px; }
        .clock-ornament.bottom-left { bottom: 10px; left: 20px; }
        .clock-ornament.bottom-right { bottom: 10px; right: 20px; }
        
        /* Геральдический щит */
        #heraldic {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            opacity: 0;
            transition: all 3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center;
            z-index: 15;
            filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.2));
        }
        
        #heraldic.visible { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        
        #heraldic svg {
            width: 300px;
            height: 300px;
            filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.3));
        }
        
        /* Романтический текст */
        #romantic-text {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%) translateY(50px);
            opacity: 0;
            transition: all 2.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center;
            z-index: 15;
            width: 90%;
            max-width: 600px;
        }
        
        #romantic-text.visible { opacity: 1; transform: translateX(-50%) translateY(0); }
        
        #romantic-text p {
            font-family: 'EB Garamond', serif;
            font-size: 28px;
            font-style: italic;
            line-height: 1.5;
            color: #fafafa;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            margin-bottom: 20px;
        }
        
        #romantic-text .quote {
            font-size: 20px;
            color: #e0e0e0;
            font-weight: 300;
            position: relative;
            padding: 15px 30px;
            margin-top: 20px;
        }
        
        #romantic-text .quote::before,
        #romantic-text .quote::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 40px;
            opacity: 0.5;
        }
        
        #romantic-text .quote::before { top: 0; left: 0; border-top: 2px solid #D4AF37; border-left: 2px solid #D4AF37; }
        #romantic-text .quote::after { bottom: 0; right: 0; border-bottom: 2px solid #D4AF37; border-right: 2px solid #D4AF37; }
        
        /* Эффект лондонского тумана */
        .fog {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(200, 200, 200, 0.1), transparent);
            opacity: 0;
            animation: fogDrift 30s linear infinite;
            z-index: 1;
        }
        
        @keyframes fogDrift {
            0% { transform: translateX(-10%) translateY(-10%); }
            50% { transform: translateX(10%) translateY(10%); }
            100% { transform: translateX(-10%) translateY(-10%); }
        }
        
        /* Листья чая */
        .tea-leaf {
            position: absolute;
            width: 15px;
            height: 15px;
            background: radial-gradient(ellipse at center, #8B9862 0%, #4A593D 100%);
            border-radius: 15px 0;
            opacity: 0;
            transform: rotate(45deg) scale(0.7);
            filter: blur(0.5px);
            z-index: 5;
        }
        
        /* Светящиеся частицы */
        .light-particle {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0) 70%);
            opacity: 0;
            transform: scale(0);
            z-index: 6;
        }
        
        /* Кнопка повторения анимации */
        #replay-button {
            position: absolute;
            bottom: 20px;
            right: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.5);
            color: #d4af37;
            font-family: 'EB Garamond', serif;
            font-size: 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            z-index: 100;
        }
        
        #replay-button:hover { background: rgba(212, 175, 55, 0.2); transform: scale(1.05); }
        #replay-button.visible { opacity: 1; }
        
        /* Декоративные углы */
        .decorative-corner {
            position: absolute;
            width: 100px;
            height: 100px;
            opacity: 0;
            transition: all 2s cubic-bezier(0, 0.55, 0.45, 1);
            z-index: 5;
        }
        
        .decorative-corner svg {
            width: 100%;
            height: 100%;
            fill: none;
            stroke: rgba(192, 156, 77, 0.4);
            stroke-width: 1;
        }
        
        .decorative-corner.top-left { top: 20px; left: 20px; transform: rotate(0deg) scale(0.8); }
        .decorative-corner.top-right { top: 20px; right: 20px; transform: rotate(90deg) scale(0.8); }
        .decorative-corner.bottom-left { bottom: 20px; left: 20px; transform: rotate(270deg) scale(0.8); }
        .decorative-corner.bottom-right { bottom: 20px; right: 20px; transform: rotate(180deg) scale(0.8); }
        
        .decorative-corner.visible { opacity: 0.5; }
        .decorative-corner.top-left.visible { transform: rotate(0deg) scale(1); }
        .decorative-corner.top-right.visible { transform: rotate(90deg) scale(1); }
        .decorative-corner.bottom-left.visible { transform: rotate(270deg) scale(1); }
        .decorative-corner.bottom-right.visible { transform: rotate(180deg) scale(1); }
        
        /* Анимации */
        @keyframes floatOrnament {
            0% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0); }
        }
        
        @keyframes glow {
            0%, 100% { opacity: var(--glow-min, 0.3); transform: scale(var(--glow-scale-min, 0.8)); }
            50% { opacity: var(--glow-max, 0.7); transform: scale(var(--glow-scale-max, 1.2)); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        /* Медальоны */
        .medallion {
            position: absolute;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: rgba(80, 0, 0, 0.2);
            border: 2px solid rgba(192, 156, 77, 0.3);
            opacity: 0;
            transition: all 2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 7;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(192, 156, 77, 0.2);
            cursor: pointer;
        }
        
        .medallion.left { top: 50%; left: 15%; transform: translateY(-50%) scale(0); }
        .medallion.right { top: 50%; right: 15%; transform: translateY(-50%) scale(0); }
        
        .medallion.visible.left { opacity: 1; transform: translateY(-50%) scale(1); }
        .medallion.visible.right { opacity: 1; transform: translateY(-50%) scale(1); }
        
        .medallion:hover { transform: translateY(-50%) scale(1.05); box-shadow: 0 0 40px rgba(192, 156, 77, 0.4); }
        
        .medallion::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(192, 156, 77, 0.2) 0%, transparent 70%);
            animation: pulse 8s infinite;
        }
        
        .medallion::after {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            width: calc(100% - 10px);
            height: calc(100% - 10px);
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .medallion-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            height: 80%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cinzel', serif;
            font-size: 30px;
            color: rgba(255, 255, 255, 0.8);
            text-shadow: 0 0 10px rgba(192, 156, 77, 0.5);
        }
        
        /* Стили для всплывающего окна */
        .popup {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 80%;
            max-width: 500px;
            padding: 30px;
            background: rgba(10, 5, 26, 0.9);
            border: 2px solid rgba(192, 156, 77, 0.5);
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(192, 156, 77, 0.3);
            z-index: 200;
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center;
        }
        
        .popup.visible { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        
        .popup p {
            font-family: 'EB Garamond', serif;
            font-size: 20px;
            color: #fafafa;
            line-height: 1.6;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
        }
        
        .popup button {
            margin-top: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.5);
            color: #d4af37;
            font-family: 'EB Garamond', serif;
            font-size: 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .popup button:hover { background: rgba(212, 175, 55, 0.2); transform: scale(1.05); }
        
        /* Соединяющая линия */
        .connecting-line {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 0;
            height: 2px;
            background: linear-gradient(to right, transparent, rgba(192, 156, 77, 0.6), transparent);
            opacity: 0;
            transition: all 3s ease;
            z-index: 6;
        }
        
        .connecting-line.visible { width: 30%; opacity: 1; }
        
        /* Сердце */
        .heart-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 40px;
            height: 40px;
            opacity: 0;
            transition: all 2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transition-delay: 1s;
            z-index: 7;
        }
        
        .heart-center.visible { opacity: 1; transform: translate(-50%, -50%) scale(1); animation: pulse 2s infinite; }
        
        .heart-center svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 5px rgba(192, 156, 77, 0.5));
        }
        
        /* Вечное пламя */
        .eternal-flame {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translateX(-50%) scale(0);
            opacity: 0;
            width: 50px;
            height: 60px;
            transition: all 2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 7;
        }
        
        .eternal-flame.visible { opacity: 1; transform: translateX(-50%) scale(1); }
        
        .flame {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 40px;
            background: linear-gradient(to top, #ff9d00, #ff0000);
            border-radius: 50% 50% 20% 20% / 60% 60% 40% 40%;
            animation: flicker 1s infinite alternate;
            filter: blur(1px);
            transform-origin: center bottom;
        }
        
        .flame::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(255, 255, 0, 0.5), transparent);
            border-radius: 50% 50% 20% 20% / 60% 60% 40% 40%;
            filter: blur(3px);
            animation: flicker 1.5s infinite alternate-reverse;
            transform-origin: center bottom;
        }
        
        .flame::after {
            content: '';
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 60%;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            filter: blur(5px);
            animation: flicker 0.8s infinite alternate;
        }
        
        @keyframes flicker {
            0%, 100% { transform: scaleY(1) scaleX(1); }
            25% { transform: scaleY(1.1) scaleX(0.9); }
            50% { transform: scaleY(0.95) scaleX(1.05); }
            75% { transform: scaleY(1.05) scaleX(0.95); }
        }
        
        /* Золотая рамка */
        .golden-frame {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 2px solid rgba(192, 156, 77, 0.3);
            opacity: 0;
            transition: all 3s ease;
            pointer-events: none;
            z-index: 2;
        }
        
        .golden-frame.visible { opacity: 1; }
        
        /* Финальный текст */
        .final-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            font-family: 'Cinzel', serif;
            font-size: 50px;
            font-weight: 600;
            text-align: center;
            color: transparent;
            opacity: 0;
            transition: all 2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 20;
            text-shadow: 0 0 10px rgba(192, 156, 77, 0.8);
            -webkit-text-stroke: 1px rgba(192, 156, 77, 0.5);
        }
        
        .final-message.visible { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        
        /* Аура любви */
        .love-aura {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 0;
            height: 0;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 0, 60, 0.05) 0%, transparent 70%);
            opacity: 0;
            z-index: 3;
            transition: all 8s cubic-bezier(0.165, 0.84, 0.44, 1);
        }
        
        .love-aura.active { width: 800px; height: 800px; opacity: 0.5; }
        
        /* Королевский герб */
        .royal-crest {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translateX(-50%) scale(0);
            opacity: 0;
            width: 120px;
            height: 150px;
            transition: all 2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 8;
        }
        
        .royal-crest.visible { opacity: 1; transform: translateX(-50%) scale(1); }
        
        /* Медиа-запросы */
        @media (max-width: 768px) {
            #romantic-text p { font-size: 20px; }
            #romantic-text .quote { font-size: 16px; }
            .medallion { width: 100px; height: 100px; }
            .medallion.left { left: 10%; }
            .medallion.right { right: 10%; }
            #heraldic svg { width: 200px; height: 200px; }
            .popup p { font-size: 18px; }
        }
        
        @media (max-width: 480px) {
            #clock-container { transform: scale(0.7); }
            .connecting-line.visible { width: 40%; }
            .medallion { width: 80px; height: 80px; }
            .medallion-content { font-size: 20px; }
            #heraldic svg { width: 150px; height: 150px; }
            .final-message { font-size: 30px; }
            .popup { padding: 20px; }
            .popup p { font-size: 16px; }
        }
    </style>
</head>
<body class="phase-initial">
    <div id="container">
        <!-- Декоративные углы -->
        <div class="decorative-corner top-left">
            <svg viewBox="0 0 100 100">
                <path d="M 0 30 Q 0 0 30 0" />
                <path d="M 0 50 Q 0 10 50 0" />
            </svg>
        </div>
        <div class="decorative-corner top-right">
            <svg viewBox="0 0 100 100">
                <path d="M 0 30 Q 0 0 30 0" />
                <path d="M 0 50 Q 0 10 50 0" />
            </svg>
        </div>
        <div class="decorative-corner bottom-left">
            <svg viewBox="0 0 100 100">
                <path d="M 0 30 Q 0 0 30 0" />
                <path d="M 0 50 Q 0 10 50 0" />
            </svg>
        </div>
        <div class="decorative-corner bottom-right">
            <svg viewBox="0 0 100 100">
                <path d="M 0 30 Q 0 0 30 0" />
                <path d="M 0 50 Q 0 10 50 0" />
            </svg>
        </div>
        
        <!-- Золотая рамка -->
        <div class="golden-frame"></div>
        
        <!-- Антикварные часы -->
        <div id="clock-container">
            <div class="clock-face">
                <div class="clock-numbers">
                    <div class="clock-number" style="top: 10px; left: 50%; transform: translateX(-50%);">XII</div>
                    <div class="clock-number" style="top: 50%; right: 10px; transform: translateY(-50%);">III</div>
                    <div class="clock-number" style="bottom: 10px; left: 50%; transform: translateX(-50%);">VI</div>
                    <div class="clock-number" style="top: 50%; left: 10px; transform: translateY(-50%);">IX</div>
                </div>
                <div class="clock-hands">
                    <div class="hand hour-hand"></div>
                    <div class="hand minute-hand"></div>
                    <div class="hand second-hand"></div>
                </div>
                <div class="clock-center"></div>
            </div>
            <div class="clock-ornament top-left"></div>
            <div class="clock-ornament top-right"></div>
            <div class="clock-ornament bottom-left"></div>
            <div class="clock-ornament bottom-right"></div>
        </div>
        
        <!-- Геральдический щит -->
        <div id="heraldic">
            <svg viewBox="0 0 100 120">
                <path d="M 50 0 C 20 0 0 20 0 50 L 0 100 L 50 120 L 100 100 L 100 50 C 100 20 80 0 50 0 Z" fill="rgba(80, 0, 0, 0.2)" stroke="rgba(192, 156, 77, 0.5)" stroke-width="1" />
                <path d="M 50 10 C 25 10 10 25 10 50 L 10 95 L 50 110 L 90 95 L 90 50 C 90 25 75 10 50 10 Z" fill="none" stroke="rgba(255, 255, 255, 0.2)" stroke-width="0.5" />
                <path d="M 50 40 L 60 55 L 75 60 L 60 70 L 65 85 L 50 75 L 35 85 L 40 70 L 25 60 L 40 55 Z" fill="rgba(192, 156, 77, 0.3)" stroke="rgba(255, 255, 255, 0.3)" stroke-width="0.5" />
                <path d="M 50 50 L 50 70" stroke="rgba(192, 156, 77, 0.5)" stroke-width="1" />
            </svg>
        </div>
        
        <!-- Романтический текст -->
        <div id="romantic-text">
            <p>My dearest Anna, thou wert mine own light, mine own joy. Though we art parted, my heart hath not let thee go.</p>
            <div class="quote">I do still love thee, and each day I dream of returning to what once was betwixt us.</div>
        </div>
        
        <!-- Медальоны -->
        <div class="medallion left">
            <div class="medallion-content">Mikhail</div>
        </div>
        <div class="medallion right">
            <div class="medallion-content">Annyuta</div>
        </div>
        
        <!-- Соединяющая линия -->
        <div class="connecting-line"></div>
        
        <!-- Сердце -->
        <div class="heart-center">
            <svg viewBox="0 0 100 100">
                <path d="M 50 30 L 65 15 A 17 17 0 1 1 95 40 L 50 85 L 5 40 A 17 17 0 1 1 35 15 L 50 30 Z" fill="rgba(180, 20, 40, 0.6)" stroke="rgba(255, 255, 255, 0.5)" stroke-width="1" />
            </svg>
        </div>
        
        <!-- Вечное пламя -->
        <div class="eternal-flame">
            <div class="flame"></div>
        </div>
        
        <!-- Аура любви -->
        <div class="love-aura"></div>
        
        <!-- Лондонский туман -->
        <div class="fog"></div>
        
        <!-- Финальное сообщение -->
        <div class="final-message">My dear beloved, shall we begin anew?</div>
        
        <!-- Кнопка повтора -->
        <button id="replay-button">Once More</button>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            startAnimation();
            document.getElementById('replay-button').addEventListener('click', function() {
                resetAnimation();
                setTimeout(startAnimation, 500);
            });
            createStars();
            createTeaLeaves();
            setupMedallionPopups();
        });
        
        function startAnimation() {
            setTimeout(function() {
                document.body.classList.remove('phase-initial');
                document.body.classList.add('phase-middle');
                document.querySelectorAll('.decorative-corner').forEach(corner => corner.classList.add('visible'));
                document.querySelector('.golden-frame').classList.add('visible');
                document.querySelectorAll('.star').forEach(star => star.style.opacity = 1);
                animateClockHands();
            }, 1000);
            
            setTimeout(function() {
                document.getElementById('clock-container').style.opacity = 0;
                document.getElementById('clock-container').style.transform = 'scale(0)';
                setTimeout(function() {
                    document.getElementById('heraldic').classList.add('visible');
                }, 500);
            }, 14000);
            
            setTimeout(function() {
                document.body.classList.remove('phase-middle');
                document.body.classList.add('phase-romantic');
                document.getElementById('romantic-text').classList.add('visible');
                document.querySelector('.fog').style.opacity = 0.3;
                createTeaLeaves();
            }, 17000);
            
            setTimeout(function() {
                document.querySelector('.medallion.left').classList.add('visible');
                document.querySelector('.medallion.right').classList.add('visible');
                setTimeout(function() {
                    document.querySelector('.connecting-line').classList.add('visible');
                    setTimeout(function() {
                        document.querySelector('.heart-center').classList.add('visible');
                        document.querySelector('.royal-crest').classList.add('visible');
                    }, 1000);
                }, 2000);
            }, 20000);
            
            setTimeout(function() {
                document.body.classList.remove('phase-romantic');
                document.body.classList.add('phase-final');
                document.querySelector('.eternal-flame').classList.add('visible');
                document.querySelector('.love-aura').classList.add('active');
            }, 24000);
            
            setTimeout(function() {
                document.querySelector('.final-message').classList.add('visible');
                setTimeout(function() {
                    document.getElementById('replay-button').classList.add('visible');
                }, 2000);
            }, 29000);
            
            setTimeout(createLightParticles, 19000);
        }
        
        function resetAnimation() {
            document.body.className = 'phase-initial';
            document.querySelectorAll('.decorative-corner, .golden-frame, .medallion, .royal-crest').forEach(el => el.classList.remove('visible'));
            document.getElementById('heraldic').classList.remove('visible');
            document.getElementById('romantic-text').classList.remove('visible');
            document.querySelector('.connecting-line').classList.remove('visible');
            document.querySelector('.heart-center').classList.remove('visible');
            document.querySelector('.eternal-flame').classList.remove('visible');
            document.querySelector('.final-message').classList.remove('visible');
            document.querySelector('.love-aura').classList.remove('active');
            document.getElementById('replay-button').classList.remove('visible');
            const clockContainer = document.getElementById('clock-container');
            clockContainer.style.opacity = '1';
            clockContainer.style.transform = 'scale(1)';
            document.querySelectorAll('.star, .tea-leaf, .light-particle, .fog').forEach(el => el.remove());
            document.querySelector('.fog').style.opacity = '0';
            document.querySelectorAll('.popup').forEach(popup => popup.remove());
        }
        
        function animateClockHands() {
            const hourHand = document.querySelector('.hour-hand');
            const minuteHand = document.querySelector('.minute-hand');
            const secondHand = document.querySelector('.second-hand');
            hourHand.style.transform = 'rotate(90deg)';
            minuteHand.style.transform = 'rotate(180deg)';
            let seconds = 0;
            const clockAnimation = setInterval(() => {
                seconds += 1;
                secondHand.style.transform = `rotate(${180 + (seconds * 6)}deg)`;
                if (seconds >= 30) {
                    clearInterval(clockAnimation);
                    hourHand.style.transform = 'rotate(120deg)';
                    minuteHand.style.transform = 'rotate(270deg)';
                }
            }, 1000);
        }
        
        function createStars() {
            const container = document.getElementById('container');
            const starCount = Math.min(window.innerWidth / 10, 100);
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.setProperty('--twinkle-duration', `${Math.random() * 4 + 2}s`);
                star.style.setProperty('--twinkle-delay', `${Math.random() * 2}s`);
                container.appendChild(star);
            }
        }
        
        function createTeaLeaves() {
            const container = document.getElementById('container');
            const leafCount = Math.min(window.innerWidth / 20, 30);
            for (let i = 0; i < leafCount; i++) {
                setTimeout(() => {
                    const leaf = document.createElement('div');
                    leaf.className = 'tea-leaf';
                    leaf.style.left = `${Math.random() * 100}%`;
                    leaf.style.setProperty('--petal-sway', `${Math.random() * 200 - 100}px`);
                    leaf.style.animation = `floatPetal ${Math.random() * 8 + 7}s ease-in-out`;
                    container.appendChild(leaf);
                    setTimeout(() => {
                        if (leaf.parentNode) leaf.parentNode.removeChild(leaf);
                    }, 15000);
                }, i * 300);
            }
        }
        
        function createLightParticles() {
            const container = document.getElementById('container');
            const particleCount = 20;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'light-particle';
                particle.style.width = `${Math.random() * 10 + 5}px`;
                particle.style.height = particle.style.width;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.setProperty('--glow-min', '0.2');
                particle.style.setProperty('--glow-max', '0.6');
                particle.style.setProperty('--glow-scale-min', '0.5');
                particle.style.setProperty('--glow-scale-max', '1');
                particle.style.animation = `glow ${Math.random() * 3 + 2}s ease-in-out infinite`;
                container.appendChild(particle);
                setTimeout(() => particle.style.opacity = 1, i * 200);
            }
        }
        
        function setupMedallionPopups() {
            const mikhailMedallion = document.querySelector('.medallion.left');
            const annyutaMedallion = document.querySelector('.medallion.right');
            
            const mikhailDescription = "You pay for both of us, caring, attentive to small details, you listen, take interest in my hobbies and me in general, willing to compromise, ready to drag medicine across half of Seoul at night because I have a headache, you don’t dismiss my 'almost-rape' experience, and so much more.";
            const annyutaDescription = "Annyuta is a person of contrasts, blending independence with deep emotions. She values freedom and personal space, often hiding her feelings behind an outward reserve. Her thoughts can remain a mystery, but beneath this enigma lies a storm of emotions she rarely lets others see. She knows how to be sincere, but expresses it in her own way—through brief words, glances, and actions. It’s important to her that those around her don’t restrict her, but understand her need for silence and solitude. At times she may seem cold, but it’s just a protective shell. Deep down, she remembers those who stood by her, who understood and accepted her as she is.";
            
            mikhailMedallion.addEventListener('click', () => showPopup(mikhailDescription));
            annyutaMedallion.addEventListener('click', () => showPopup(annyutaDescription));
        }
        
        function showPopup(description) {
            const existingPopup = document.querySelector('.popup');
            if (existingPopup) existingPopup.remove();
            
            const popup = document.createElement('div');
            popup.className = 'popup';
            popup.innerHTML = `
                <p>${description}</p>
                <button>Close</button>
            `;
            document.getElementById('container').appendChild(popup);
            
            setTimeout(() => popup.classList.add('visible'), 10);
            
            popup.querySelector('button').addEventListener('click', () => {
                popup.classList.remove('visible');
                setTimeout(() => popup.remove(), 500);
            });
        }
        
        // Инициализация анимации
        document.addEventListener('DOMContentLoaded', function() {
            const fog = document.createElement('div');
            fog.className = 'fog';
            document.getElementById('container').appendChild(fog);
            createClockNumbers();
            startAnimation();
            document.getElementById('replay-button').addEventListener('click', () => {
                resetAnimation();
                setTimeout(startAnimation, 500);
            });
        });
        
        function createClockNumbers() {
            const numbers = ['I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX', 'X', 'XI', 'XII'];
            const clockNumbers = document.querySelector('.clock-numbers');
            numbers.forEach((num, index) => {
                const angle = (index * 30) * (Math.PI / 180);
                const radius = 90;
                const numberElement = document.createElement('div');
                numberElement.className = 'clock-number';
                numberElement.textContent = num;
                numberElement.style.left = `${50 + Math.cos(angle) * radius}%`;
                numberElement.style.top = `${50 + Math.sin(angle) * radius}%`;
                numberElement.style.transform = 'translate(-50%, -50%)';
                clockNumbers.appendChild(numberElement);
            });
        }
    </script>
</body>
</html>
